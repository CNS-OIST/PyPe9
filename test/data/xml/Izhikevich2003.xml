<?xml version="1.0" encoding="UTF-8"?>
<NineML xmlns="http://nineml.net/9ML/1.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://nineml.net/9ML/1.0/schema/NineML_v0.2.xsd">
  <Dynamics name="Izhikevich">
    <Parameter name="a" dimension="per_time"/>
    <Parameter name="b" dimension="per_time"/>
    <Parameter name="c" dimension="voltage"/>
    <Parameter name="d" dimension="voltage_per_time"/>
    <Parameter name="vthresh" dimension="voltage"/>
    <Parameter name="Cm" dimension="capacitance"/>
    <AnalogReducePort name="iExt" dimension="current" operator="+"/>
    <EventSendPort name="spike" mode="send"/>
    <StateVariable name="v" dimension="voltage"/>
    <StateVariable name="u" dimension="voltage_per_time"/>
    <EventReceivePort name="incoming_spike"/>
    <AnalogReceivePort dimension="voltage" name="weight"/>   
    <Regime name="subthreshold">
      <TimeDerivative variable="u">
        <MathInline>a*(b*v - u)</MathInline>
      </TimeDerivative>
      <TimeDerivative variable="v">
        <MathInline>const1*v*v + const2*v + const3 - u + iExt/Cm</MathInline>
      </TimeDerivative>
      <OnCondition target_regime="subthreshold">
        <Trigger>
          <MathInline>v &gt; vthresh</MathInline>
        </Trigger>
        <StateAssignment variable="v">
          <MathInline>c</MathInline>
        </StateAssignment>
        <StateAssignment variable="u">
          <MathInline>u+d</MathInline>
        </StateAssignment>
        <OutputEvent port="spike"/>
      </OnCondition>
      <OnEvent target_regime="subthreshold" port="incoming_spike">
        <StateAssignment variable="v">
          <MathInline>v + weight</MathInline>
        </StateAssignment>
      </OnEvent> 
    </Regime>
    <Constant name="const1" units="per_mvs" value="0.04"/>
    <Constant name="const2" units="per_ms" value="5"/>
    <Constant name="const3" units="mV_per_ms" value="140"/>
  </Dynamics>
  <DynamicsProperties name="IzhikevichProperties">
    <Definition name="Izhikevich"/>
    <Property name="a">
      <Quantity units="per_ms">
        <SingleValue>0.02</SingleValue>
      </Quantity>
    </Property>
    <Property name="b">
      <Quantity units="per_ms">
        <SingleValue>0.2</SingleValue>
      </Quantity>
    </Property>
    <Property name="c">
      <Quantity units="mV">
        <SingleValue>-65.0</SingleValue>
      </Quantity>
    </Property>
    <Property name="d">
      <Quantity units="mV_per_ms">
        <SingleValue>6</SingleValue>
      </Quantity>
    </Property>
    <Property name="vthresh">
      <Quantity units="mV">
        <SingleValue>30.0</SingleValue>
      </Quantity>
    </Property>
    <Property name="Cm">
      <Quantity units="nF">
        <SingleValue>1.0</SingleValue>
      </Quantity>
    </Property>
  </DynamicsProperties>
  <Dimension name="voltage" m="1" l="2" t="-3" i="-1"/>
  <Dimension name="voltage_per_time" m="1" l="2" t="-4" i="-1"/>
  <Dimension name="per_voltage_time" m="-1" l="-2" t="2" i="1"/>
  <Dimension name="per_time" t="-1"/>
  <Dimension name="current" i="1"/>
  <Dimension name="capacitance" m="-1" l="-2" t="4" i="2"/>
  <Unit symbol="mV" dimension="voltage" power="-3"/>
  <Unit symbol="mV_per_ms" dimension="voltage_per_time" power="0"/>
  <Unit symbol="per_mvs" dimension="per_voltage_time" power="6"/>
  <Unit symbol="per_ms" dimension="per_time" power="3"/>
  <Unit symbol="nF" dimension="capacitance" power="-9"/>
</NineML>