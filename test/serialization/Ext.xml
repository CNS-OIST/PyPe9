<?xml version='1.0' encoding='UTF-8'?>
<NineML xmlns="http://nineml.net/9ML/1.0">
  <ComponentArray name="Ext">
    <Size>5</Size>
    <Reference>Ext</Reference>
  </ComponentArray>
  <MultiDynamicsWithSynapses name="Ext_Dynamics">
    <Cell>
      <MultiDynamics name="Ext_Dynamics">
        <SubDynamics name="cell">
          <Reference>Poisson</Reference>
        </SubDynamics>
        <EventSendPortExposure name="spike_output__cell" sub_component="cell" port="spike_output"/>
        <Annotations>
          <Validation dimensionality="True"/>
        </Annotations>
      </MultiDynamics>
    </Cell>
    <Annotations>
      <Validation dimensionality="True"/>
    </Annotations>
  </MultiDynamicsWithSynapses>
  <ComponentClass name="Poisson">
    <Parameter name="rate" dimension="per_time"/>
    <EventSendPort name="spike_output"/>
    <Dynamics>
      <StateVariable name="t_next" dimension="time"/>
      <Regime name="default">
        <OnCondition target_regime="default">
          <Trigger>
            <MathInline>t &gt; t_next</MathInline>
          </Trigger>
          <StateAssignment variable="t_next">
            <MathInline>one_second*random.exponential(one_second*rate) + t</MathInline>
          </StateAssignment>
          <OutputEvent port="spike_output"/>
        </OnCondition>
      </Regime>
      <Constant name="one_second" units="s">1.0</Constant>
    </Dynamics>
    <Annotations>
      <Validation dimensionality="True"/>
    </Annotations>
  </ComponentClass>
  <Component name="stim">
    <Definition url="/Users/tclose/git/ninemlcatalog/xml/input/Poisson.xml">Poisson</Definition>
    <Property name="rate" units="per_s">
      <SingleValue>300.0</SingleValue>
    </Property>
    <Initial name="t_next" units="ms">
      <RandomDistributionValue>
        <Reference>exponential_beta</Reference>
      </RandomDistributionValue>
    </Initial>
  </Component>
  <Component name="exponential_beta">
    <Definition url="/Users/tclose/git/ninemlcatalog/xml/randomdistribution/Exponential.xml">ExponentialDistribution</Definition>
    <Property name="rate" units="unitless">
      <SingleValue>52638.7053487</SingleValue>
    </Property>
  </Component>
  <Dimension name="dimensionless"/>
  <Dimension name="per_time" t="-1"/>
  <Dimension name="time" t="1"/>
  <Unit symbol="ms" dimension="time" power="-3"/>
  <Unit symbol="per_s" dimension="per_time" power="0"/>
  <Unit symbol="s" dimension="time" power="0"/>
  <Unit symbol="unitless" dimension="dimensionless" power="0"/>
</NineML>
